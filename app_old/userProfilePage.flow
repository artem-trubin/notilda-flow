import material/material2tropic;

import app/state;

export {
  makePageUserProfile(state : State) -> Material;
}

makePageUserProfile(state : State) -> Material {

  currentUserName = getValue(state.userB).name;
  userNameB = make(currentUserName);

  saveUserSettings = \ -> {
    next(
      state.userB,
      User(
        getValue(state.userB) with
        name = getValue(userNameB)
      )
    )
  };

  userNameInput = MTextInput(
    userNameB,
    [MLabel("Username"), MFloatingLabel()],
    []
  );
  userNameSaveButton = MTextButton("Save", saveUserSettings, [], []);

  MLines([
    MSelect(state.userB, \user -> MText(formatString("Hi there, %1", [user.name]), [])),
    MFixedY(32.0),
    userNameInput,
    userNameSaveButton,
  ]);
}
