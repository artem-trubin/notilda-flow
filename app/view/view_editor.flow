import app/globals;
import app/note/note;
import app/state/state;

export {
  makeViewEditor(
    state : NotildaState,
  ) -> Material;
}

makeViewEditor(
  state : NotildaState,
) -> Material {
  MSelect(state.currentNoteB, \note -> {
    noteTitleB = make(note.title);
    noteTextB = make(note.text);

    viewTitle = MText(
      "Note" + if (debugOn) formatString(" [%1]", [note.id]) else "",
      []
    );

    titleInput = MTextInput(
      noteTitleB,
      [
        MOutlined(),
      ],
      [],
    );

    textInput = MTextInput(
      noteTextB,
      [
        Multiline(true),
        MMaxLines(10),
        MOutlined(),
      ],
      []
    );

    MBorder4(
      16.0,
      MLinesA([
        viewTitle,
        MFixedY(16.0),
        titleInput,
        MFixedY(16.0),
        textInput,
      ])
    );
  });
}
