import math/crypto;
import material/material;

export {
  Note(
    id : string,
    text : string,
  );

  makeNote(text : string) -> Note;
  editNote(note : Note, newText : string) -> Note;
  createMockNotes() -> [Material];
  makeNoteMaterial(note : Note) -> Material;
}

makeNote(text : string) -> Note {
  newId = generateUID("", "", 16);

  Note(newId, text)
}

makeNoteMaterial(note : Note) -> Material {
  noteText = MSupportingTextBlock(
    note.text,
    []
  );

  blocks = [noteText];
  style = [];
  state = [];

  MCard(blocks, style, state)
}

editNote(note : Note, newText : string) -> Note {
  Note(note with text = newText)
}

createMockNotes() -> [Material] {
  notes = [
    makeNote("Test note"),
    makeNote("Second test note"),
    makeNote("Third test note"),
  ];

  map(notes, \note -> makeNoteMaterial(note))
}
